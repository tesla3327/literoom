# Simplified Files

- crates/literoom-core/src/adjustments.rs
- crates/literoom-core/src/mask/apply.rs
- crates/literoom-core/src/transform/rotation.rs
- crates/literoom-core/src/decode/raw_thumbnail.rs
- crates/literoom-core/src/curve.rs
- crates/literoom-core/src/transform/crop.rs
- crates/literoom-core/src/mask/radial.rs
- crates/literoom-core/src/mask/linear.rs
- crates/literoom-core/src/lib.rs (Histogram impl)
- crates/literoom-core/src/decode/jpeg.rs
- crates/literoom-core/src/histogram.rs (extracted luminance to shared module)
- crates/literoom-core/src/decode/types.rs (extracted swaps_dimensions helper to simplify oriented_dimensions)
- crates/literoom-core/src/decode/resize.rs (simplified calculate_fit_dimensions to use single scale factor)
- packages/core/src/gpu/capabilities.ts (extracted buildCapabilities and getAdapterInfo helpers to DRY detectGPUCapabilities and GPUCapabilityService.initialize)
- packages/core/src/gpu/texture-utils.ts (extracted rgbToRgba and rgbaToRgb to DRY gpu-adjustments-service, gpu-histogram-service, gpu-mask-service, and gpu-tone-curve-service)
- packages/core/src/catalog/thumbnail-cache.ts (extracted OPFSCache and CombinedCache base classes to DRY OPFSThumbnailCache/OPFSPreviewCache and ThumbnailCache/PreviewCache)
- packages/core/src/decode/decode-worker.ts (extracted createWasmAdjustments, toWasmMaskAdjustments, toWasmLinearMask, toWasmRadialMask, toWasmMaskStack, sendImageSuccess, and decodeImage helpers to DRY apply-adjustments, apply-rotation, apply-crop, apply-masked-adjustments, generate-thumbnail, generate-preview, and generate-edited-thumbnail handlers)
- packages/core/src/gpu/pipelines/rotation-pipeline.ts (removed duplicate rgbToRgba/rgbaToRgb functions, now imports from texture-utils.ts)
- packages/core/src/gpu/pipelines/mask-pipeline.ts (DRY by importing createTextureFromPixels, createOutputTexture, readTexturePixels, calculateDispatchSize from texture-utils.ts; also updated adjustments-pipeline.ts, tone-curve-pipeline.ts, histogram-pipeline.ts to use calculateDispatchSize)
- packages/core/src/filesystem/browser.ts (extracted withTransaction helper to DRY saveHandle, loadHandle, removeHandle, listSavedHandles IndexedDB operations)
- packages/core/src/catalog/catalog-service.ts (extracted withHandleDB helper to DRY persistHandle and loadHandle IndexedDB operations)
- apps/web/app/utils/zoomCalculations.ts (extracted Dimensions interface and helpers to DRY calculateFitScale, calculateFillScale, clampPan, calculateCenteredPan, and detectPreset)
- apps/web/app/stores/selection.ts (extracted getNavigatedId and findWithWrapAround helpers to DRY navigateNext, navigatePrevious, and navigateToNextUnflagged)
- apps/web/app/components/help/HelpModal.vue (extracted shortcut data into typed Column/Section/Shortcut structures and used v-for to replace ~200 lines of repetitive HTML with ~50 lines of data-driven template)
- apps/web/app/components/catalog/RecentFoldersDropdown.vue (extracted formatRelativeTime utility to DRY duplicate formatDate functions in RecentFoldersDropdown.vue and index.vue)
- apps/web/app/stores/edit.ts (extracted findMaskById helper to DRY mask lookups in toggleMaskEnabled, setMaskAdjustments, setMaskAdjustment, and selectedMask computed; extracted buildEditState helper to DRY EditState construction in editState computed, saveToCache, and getEditStateForAsset)
- apps/web/app/composables/maskUtils.ts (extracted distance and clamp01 helpers to canvasCoords.ts to DRY 5 distance calculations and 5 clamp operations in maskUtils.ts; extracted getMaskColors helper to DRY color selection in drawLinearMask and drawRadialMask; also updated cropUtils.ts to use distance helper)
- apps/web/app/stores/editUI.ts (extracted getDimensions helper to DRY repeated dimension parameter passing; exported hasValidDimensions from zoomCalculations.ts to DRY dimension validation; added STANDARD_PRESETS set to DRY preset checking in initializeZoom)
- packages/core/src/gpu/gpu-tone-curve-service.ts (extracted isLinearCurve to decode/curve-utils.ts to DRY duplicate linear curve detection in gpu-tone-curve-service.ts and mock-decode-service.ts)
- apps/web/app/composables/useHistogramDisplaySVG.ts (extracted sampleHistogramToPoints helper and removed unused histogramToStrokePath function to DRY histogram path generation)
- packages/core/src/catalog/thumbnail-service.ts (extracted QueueProcessor helper class to DRY duplicate queue/processing logic between thumbnail and preview pipelines)
- apps/web/app/components/catalog/CatalogGrid.vue (extracted useGridLayout composable to DRY grid layout calculations including rowCount, getGlobalIndex, columnsInRow, getRowIndex, and getItem helpers)
- packages/core/src/decode/mock-decode-service.ts (extracted clamp255 and luminance helpers to DRY ~35 clamping operations and ~7 luminance calculations; consolidated applyAdjustments to use applyAllAdjustmentsToPixel which is also used by applyPixelAdjustments for masked adjustments)
- packages/core/src/gpu/pipelines/adjustments-pipeline.ts (extracted packAdjustmentsToFloat32Array helper to DRY duplicate Float32Array construction in apply() and applyToTextures() methods)
- packages/core/src/gpu/adaptive-processor.ts (extracted _buildGPUSuccessResult, _buildWASMFallbackResult, _buildWASMResult, _handleGPUError, and _logPerformance helpers to DRY duplicate GPU execution, timing, logging, and error handling logic between execute() and executeSync() methods)
- packages/core/src/decode/curve-utils.ts (extracted linearInterpolateCurve helper to DRY duplicate linear interpolation logic in useToneCurve.ts and mock-decode-service.ts)
- packages/core/src/decode/decode-worker-pool.ts (extracted routeRequest helper to DRY duplicate getLeastBusyWorker() + generateId() + sendRequest() pattern across 14 IDecodeService methods)
- packages/core/src/gpu/pipelines/edit-pipeline.ts (extracted applyStage helper to DRY duplicate output texture creation, stage application, and cleanup tracking pattern across adjustments, tone curve, and masks stages)
- packages/core/src/gpu/pipelines/rotation-pipeline.ts (extracted buildRotationParams helper to DRY duplicate rotation parameter calculation in apply() and applyToTextures() methods)
- packages/core/src/gpu/pipelines/tone-curve-pipeline.ts (extracted executeComputePass helper to DRY duplicate LUT update, dimensions buffer update, bind group creation, and compute pass execution between apply() and applyToTextures() methods)
